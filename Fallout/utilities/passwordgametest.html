<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Test Page</title>
    <link id="theme" rel="stylesheet" type="text/css" href="../fallout.css" />
    <link rel="icon" type="image/x-icon" href="../img/vaultgirl.webp">

  </head>
  <body>
    <div id="buttonpannel" class="buttonpannel">

    </div>
    <div id="date">
      <span id="day"></span>
      <span id="month"></span>
      <span id="year"></span>
      <span class="time"></span>
    </div>
    <script src="../clock.js"></script>
    <img class="pagebg" src="../img/pipboy2000.webp"></img>
    <div id="navcontainer" class="navcontainer">
      <script src="../pipnav2.js"></script>
    </div>
    <div class="screen">
      <div class="contentwindow">
        <div id="game-screen">
          <h1>Attempting Authorization...</h1>
          <div id="play-area">
            <p>Enter ${password}</p>
            <p>Attempts remaining: <span id="guess-count"></span></p>
            <div id="password-options"></div>
          </div>
          <div  id="guess-log">
            <p>Letters in common:</p>
          </div>
        </div>

        <div id="failure-screen" style="display: none;">
          <h1>Access Denied</h1>
          <p>You have used all of your password guesses. Access is denied.</p>
        </div>

        <div id="win-screen" style="display: none;">
          <h1>Access Granted</h1>
          <p>Redirecting to desired page...</p>
          <div id="win-redirect-target" style="display: none;">https://www.google.com</div>
        </div>


      </div>
    </div>
    <script type="text/javascript">
    // Define an array of arrays, where each inner array contains the possible passwords to choose from
    const passwordOptionSets = [
      ["CLASP", "FLASK", "GLIMP", "BLIMP", "CRISP", "GRASP", "BRISK", "GRIST", "FRISK", "PLISK"],
      ["BRUTE", "CRUDE", "DRUPE", "GRUEL", "PRUDE", "TRUCE", "DRUSE", "SPRUE", "CRUSE", "GRUME"],
      ["LOUNGE", "ROUGE", "ROUSE", "FOULE", "FLOUR", "FLOUT", "FLOOD", "FLOSS", "FLUTE", "GLUME"],
      ["JESTER", "LUSTER", "LUSTRE", "FOSTER", "POSTER", "ROSTER", "TOASTER", "WASTER", "MUSTER", "BUSTER"],
      ["LIBRARY", "RIBALDRY", "RIBOSOME", "RIBONULE", "RIBOSOME", "RIBONULE", "SIBYLLIC", "SIBILANT", "SIBYLLIC", "SIBYLLINE"],
      ["VOLTAGE", "COLLOQUY", "COLOGNE", "COLLIER", "VOLCANO", "COLLIER", "COLONUS", "COLLIER", "COLLATE", "COLLIDE"],
      ["RESIDENT", "PRESIDENT", "RESISTANT", "PRESCIENT", "RESENTED", "PRESENTER", "PRESERVED", "RESERVED", "RESENTFUL", "PRESIDIO"],
      ["THOUSAND", "THOROUGH", "THOUGHTS", "THOUGHTY", "TOUGHING", "THOUGHST", "THROUGHLY", "THROUGHGO", "THOUMOST", "THROUGHGA"],
      ["AMBIGUOUS", "AMBITIOUS", "AMPHIBIAN", "AMPHIBOLE", "AMPLITUDE", "AMPLIFIED", "AMBROSIAL", "AMBROSIAN", "AMPHIBIAN", "AMPHIBOLY"],
      ["KNOWLEDGE", "ACKNOWLEDGE", "ACKNOWLEDGEMENT", "KNOWLEDGEABLE", "ACKNOWLEDGED", "ACKNOWLEDGING", "ACKNOWLEDGMENT", "KNOWLEDGEABLY", "ACKNOWLEDGEABLE", "KNOWLEDGELESS"],
      ["DISCRETION", "INDISCREET", "INDISCRETE", "INDISCRETELY", "INDISCRETION", "DISCRETIONAL", "INDISCREETLY", "INDISCRETIONARY", "INDISCRETENESS", "INDISCRETIONAL"],
      ["MISCELLANY", "MISCELLANEA", "MISTLETOES", "MISSILRIES", "MISSILRIES", "MISTLETOES", "MISCELLANY", "MISCELLANEA", "MISCIBILITY", "MISSILRIES"],
    ];

    // Choose a password set at random
    const passwordOptions = passwordOptionSets[Math.floor(Math.random() * passwordOptionSets.length)];

    // Choose a password from the options
    let password = passwordOptions[Math.floor(Math.random() * passwordOptions.length)];

    // Display the password options as buttons
    const passwordOptionsContainer = document.getElementById("password-options");
    passwordOptions.forEach(option => {
      const button = document.createElement("button");
      button.textContent = option;
      button.addEventListener("click", function() {
        checkInput(option);
      });
      passwordOptionsContainer.appendChild(button);
    });

    // Set up the guess count and limit
    let guessCount = 5;
    const guessLimit = 5;
    document.getElementById("guess-count").innerHTML = guessCount;

    // Get the game screen and result screens
    const gameScreen = document.getElementById("game-screen");
    const failureScreen = document.getElementById("failure-screen");
    const winScreen = document.getElementById("win-screen");

    // Get the guess count element
    const guessCountElement = document.getElementById("guess-count");

    // Define the function to check the user's input
    function checkInput(input) {
  let count = 0;
  for (let i = 0; i < input.length; i++) {
    for (let j = 0; j < password.length; j++) {
      if (input[i] === password[j]) {
        count++;
        break;
      }
    }
  }

  if (input === password) {
    // Execute script to load desired web page
    document.getElementById("game-screen").style.display = "none";
    document.getElementById("win-screen").style.display = "block";
    setTimeout(function() {
      window.location.href = document.getElementById("win-redirect-target").textContent;
    }, 3500);
  } else {
    guessCount--;
    document.getElementById("guess-count").innerHTML = guessCount;
    if (guessCount === 0) {
      document.getElementById("game-screen").style.display = "none";
      document.getElementById("failure-screen").style.display = "block";
    } else {

      const guessLog = document.createElement("div");
      guessLog.textContent = input + " â€” " + count + "/" + password.length;
      document.getElementById("guess-log").appendChild(guessLog);

      passwordOptions.splice(passwordOptions.indexOf(input), 1);
      password = passwordOptions[Math.floor(Math.random() * passwordOptions.length)];
      passwordOptionsContainer.innerHTML = "";
      passwordOptions.forEach(option => {
        const button = document.createElement("button");
        button.textContent = option;
        if (option !== input) {
          button.addEventListener("click", function() {
            checkInput(option);
          });
        } else {
          button.disabled = true;
          button.textContent = "ERROR";
        }
        passwordOptionsContainer.appendChild(button);
      });
    }
  }
}



    </script>
  </body>
</html>
